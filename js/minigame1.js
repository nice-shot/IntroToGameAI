!function(e){function t(t){for(var n,o,i=t[0],l=t[1],d=t[2],p=0,f=[];p<i.length;p++)o=i[p],r[o]&&f.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);f.length;)f.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={1:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var c=l;s.push([1080,0]),a()}({1080:function(e,t,a){"use strict";a.r(t);var n=a(128),r=a(34),s=a.n(r);let o,i,l,d,c,p,f=!1,u=!1,y=0,m=!0;var _=class extends s.a.Scene{constructor(){super({key:"GameLoop"})}preload(){this.load.atlas("ninja","assets/ninja.png","assets/ninja-atlas.json"),this.load.atlas("guard","assets/boss.png","assets/boss-atlas.json"),this.load.image("floors","assets/Interior_Floors_by_George.png"),this.load.image("walls","assets/Interior_Walls_by_George.png"),this.load.tilemapTiledJSON("map","assets/gameloop_map.json")}create(){const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("Interior_Floors_by_George","floors"),a=e.addTilesetImage("Interior_Walls_by_George","walls"),n=(e.createStaticLayer("Floor",t,0,0),e.createStaticLayer("Walls",a,0,0));n.setCollisionBetween(1,999);const r=e.findObject("Objects",e=>"PlayerSpawn"===e.name),s=e.findObject("Objects",e=>"GuardSpawn"===e.name);o=this.physics.add.sprite(r.x,r.y,"ninja","ninja_front").setSize(16,16).setOffset(0,15).setCollideWorldBounds(!0),l=this.physics.add.sprite(s.x,s.y,"guard","boss_front").setSize(16,16).setOffset(0,15).setCollideWorldBounds(!0),this.physics.add.collider(o,n),this.physics.add.collider(o,l);const{width:_,height:b}=this.sys.canvas;d=this.add.text(_/2,b/2,"Game Over",{fill:"red",backgroundColor:"rgba(0, 0, 0, .5)"}).setOrigin().setVisible(!1),c=this.add.text(5,16,"Restart",{fill:"white",backgroundColor:"rgba(0, 0, 0, 0.6)"}).setInteractive().on("pointerdown",()=>{f=!1,u=!1,y=0,m=!0,p.setText(y),d.setVisible(!1),o.setPosition(r.x,r.y),l.setPosition(s.x,s.y)}),p=this.add.text(_-5,16,y,{fill:"#0f0",backgroundColor:"rgba(0, 0, 0, 0.6)",align:"right"}).setOrigin(1,0);const g=this.anims;g.create({key:"ninja_left_walk",frames:g.generateFrameNames("ninja",{prefix:"ninja_left_walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),g.create({key:"ninja_right_walk",frames:g.generateFrameNames("ninja",{prefix:"ninja_right_walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),g.create({key:"ninja_front_walk",frames:g.generateFrameNames("ninja",{prefix:"ninja_front_walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),g.create({key:"ninja_back_walk",frames:g.generateFrameNames("ninja",{prefix:"ninja_back_walk.",start:0,end:3,zeroPad:3}),frameRate:10,repeat:-1}),g.create({key:"guard_front_walk",frames:g.generateFrameNames("guard",{prefix:"boss_front_walk.",start:0,end:3,zeroPad:3}),frameRate:5,repeat:-1}),g.create({key:"guard_back_walk",frames:g.generateFrameNames("guard",{prefix:"boss_back_walk.",start:0,end:3,zeroPad:3}),frameRate:5,repeat:-1}),i=this.input.keyboard.createCursorKeys()}updatePlayerMovement(){const e=o.body.velocity.clone();o.body.setVelocity(0),i.left.isDown?o.body.setVelocityX(-100):i.right.isDown&&o.body.setVelocityX(100),i.up.isDown?o.body.setVelocityY(-100):i.down.isDown&&o.body.setVelocityY(100),o.body.velocity.normalize().scale(175),i.left.isDown?o.anims.play("ninja_left_walk",!0):i.right.isDown?o.anims.play("ninja_right_walk",!0):i.up.isDown?o.anims.play("ninja_back_walk",!0):i.down.isDown?o.anims.play("ninja_front_walk",!0):(o.anims.stop(),e.x<0?o.setTexture("ninja","ninja_left"):e.x>0?o.setTexture("ninja","ninja_right"):e.y<0?o.setTexture("ninja","ninja_back"):e.y>0&&o.setTexture("ninja","ninja_front"))}updateGuardMovement(){l.body.setVelocity(0),!f&&o.x>100&&o.x<145?u=!0:((l.y<=15||l.y>=140)&&(f=!f),f?(l.body.setVelocityY(-90),l.anims.play("guard_back_walk",!0)):(l.body.setVelocityY(90),l.anims.play("guard_front_walk",!0)))}calculateScore(){const e=[30,210];(m&&o.x>=e[1]||!m&&o.x<=e[0])&&(m=!m,y++,p.setText(y))}update(e,t){if(u)return l.anims.stop(),o.anims.stop(),o.body.setVelocity(0),void d.setVisible(!0);this.updatePlayerMovement(),this.updateGuardMovement(),this.calculateScore()}};Object(n.a)({scene:[_],width:240,height:256,zoom:2})}});
//# sourceMappingURL=minigame1.js.map