{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scenes/simple_sneak.js","webpack:///./src/games/minigame1.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","player","cursors","guard","gameOverText","restartBtn","scoreText","guardMovingUp","seenPlayer","score","targetRight","simple_sneak","phaser_default","a","Scene","[object Object]","super","this","load","atlas","image","tilemapTiledJSON","map","make","tilemap","floorTileset","addTilesetImage","wallsTileset","wallsLayer","createStaticLayer","setCollisionBetween","playerSpawn","findObject","obj","guardSpawn","physics","add","sprite","x","y","setSize","setOffset","setCollideWorldBounds","collider","width","height","sys","canvas","text","fill","backgroundColor","setOrigin","setVisible","setInteractive","on","setText","setPosition","align","anims","frames","generateFrameNames","prefix","start","end","zeroPad","frameRate","repeat","input","keyboard","createCursorKeys","prevVelocity","body","velocity","clone","setVelocity","left","isDown","setVelocityX","right","up","setVelocityY","down","normalize","scale","play","stop","setTexture","TARGETS","time","delta","updatePlayerMovement","updateGuardMovement","calculateScore","load_game","scene","zoom"],"mappings":"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","file":"js/minigame1.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1089,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import Phaser from 'phaser';\n\n// let controls;\nlet player;\nlet cursors;\nlet guard;\nlet guardMovingUp = false;\nlet seenPlayer = false;\nlet gameOverText;\nlet restartBtn;\nlet score = 0;\nlet scoreText;\nlet targetRight = true;\n\n\nclass GameLoop extends Phaser.Scene {\n\tconstructor() {\n\t\tsuper('GameLoop');\n\t}\n\n\tpreload() {\n\t\tthis.load.atlas(\"ninja\", \"assets/ninja.png\", \"assets/ninja-atlas.json\");\n\t\tthis.load.atlas(\"guard\", \"assets/boss.png\", \"assets/boss-atlas.json\");\n\t\tthis.load.image(\"floors\", \"assets/Interior_Floors_by_George.png\");\n\t\tthis.load.image(\"walls\", \"assets/Interior_Walls_by_George.png\");\n\t\tthis.load.tilemapTiledJSON(\"map\", \"assets/gameloop_map.json\");\n\t}\n\n\tcreate() {\n\t\t// Setting up the map\n\n\t\tconst map = this.make.tilemap({ key: 'map' });\n\n\t\tconst floorTileset = map.addTilesetImage('Interior_Floors_by_George', 'floors');\n\t\tconst wallsTileset = map.addTilesetImage('Interior_Walls_by_George', 'walls');\n\n\t\tconst floorLayer = map.createStaticLayer('Floor', floorTileset, 0, 0);\n\t\tconst wallsLayer = map.createStaticLayer('Walls', wallsTileset, 0, 0);\n\n\t\twallsLayer.setCollisionBetween(1, 999);\n\t\t// aboveLayer.setDepth(10); // Show above player\n\n\t\tconst playerSpawn = map.findObject('Objects', obj => obj.name === 'PlayerSpawn');\n\t\tconst guardSpawn = map.findObject('Objects', obj => obj.name === 'GuardSpawn');\n\n\t\t// Characters\n\n\t\tplayer = this.physics.add\n\t\t\t.sprite(playerSpawn.x, playerSpawn.y, \"ninja\", \"ninja_front\")\n\t\t\t.setSize(16, 16)\n\t\t\t.setOffset(0, 15)\n\t\t\t.setCollideWorldBounds(true)\n\t\t;\n\n\t\tguard = this.physics.add\n\t\t\t.sprite(guardSpawn.x, guardSpawn.y, \"guard\", \"boss_front\")\n\t\t\t.setSize(16, 16)\n\t\t\t.setOffset(0, 15)\n\t\t\t.setCollideWorldBounds(true)\n\t\t;\n\n\n\t\tthis.physics.add.collider(player, wallsLayer);\n\t\tthis.physics.add.collider(player, guard);\n\n\n\t\t// UI\n\n\t\tconst { width, height } = this.sys.canvas;\n\n\t\tgameOverText = this.add\n\t\t\t.text(width / 2, height / 2, 'Game Over', {\n\t\t\t\tfill: 'red',\n\t\t\t\tbackgroundColor: 'rgba(0, 0, 0, .5)',\n\t\t\t})\n\t\t\t.setOrigin()\n\t\t\t.setVisible(false)\n\t\t;\n\n\t\trestartBtn = this.add\n\t\t\t.text(5, 16, 'Restart', {\n\t\t\t\tfill: 'white',\n\t\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0.6)',\n\t\t\t})\n\t\t\t.setInteractive()\n\t\t\t.on('pointerdown', () => {\n\t\t\t\tguardMovingUp = false;\n\t\t\t\tseenPlayer = false;\n\t\t\t\tscore = 0;\n\t\t\t\ttargetRight = true;\n\t\t\t\tscoreText.setText(score);\n\t\t\t\tgameOverText.setVisible(false);\n\t\t\t\tplayer.setPosition(playerSpawn.x, playerSpawn.y);\n\t\t\t\tguard.setPosition(guardSpawn.x, guardSpawn.y);\n\t\t\t})\n\t\t;\n\n\t\tscoreText = this.add\n\t\t\t.text(width - 5, 16, score, {\n\t\t\t\tfill: '#0f0',\n\t\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0.6)',\n\t\t\t\talign: 'right',\n\t\t\t})\n\t\t\t.setOrigin(1, 0)\n\t\t;\n\n\t\t// Animations\n\t\tconst anims = this.anims;\n\n\t\t// Player animation\n\t\tanims.create({\n\t\t\tkey: 'ninja_left_walk',\n\t\t\tframes: anims.generateFrameNames(\"ninja\", { prefix: 'ninja_left_walk.', start: 0, end: 3, zeroPad: 3 }),\n\t\t\tframeRate: 10,\n\t\t\trepeat: -1\n\t\t});\n\t\tanims.create({\n\t\t\tkey: 'ninja_right_walk',\n\t\t\tframes: anims.generateFrameNames(\"ninja\", { prefix: 'ninja_right_walk.', start: 0, end: 3, zeroPad: 3 }),\n\t\t\tframeRate: 10,\n\t\t\trepeat: -1\n\t\t});\n\t\tanims.create({\n\t\t\tkey: 'ninja_front_walk',\n\t\t\tframes: anims.generateFrameNames(\"ninja\", { prefix: 'ninja_front_walk.', start: 0, end: 3, zeroPad: 3 }),\n\t\t\tframeRate: 10,\n\t\t\trepeat: -1\n\t\t});\n\t\tanims.create({\n\t\t\tkey: 'ninja_back_walk',\n\t\t\tframes: anims.generateFrameNames(\"ninja\", { prefix: 'ninja_back_walk.', start: 0, end: 3, zeroPad: 3 }),\n\t\t\tframeRate: 10,\n\t\t\trepeat: -1\n\t\t});\n\n\t\t// Guard animation\n\t\tanims.create({\n\t\t\tkey: 'guard_front_walk',\n\t\t\tframes: anims.generateFrameNames('guard', { prefix: 'boss_front_walk.', start: 0, end: 3, zeroPad: 3 }),\n\t\t\tframeRate: 5,\n\t\t\trepeat: -1\n\t\t});\n\n\t\tanims.create({\n\t\t\tkey: 'guard_back_walk',\n\t\t\tframes: anims.generateFrameNames('guard', { prefix: 'boss_back_walk.', start: 0, end: 3, zeroPad: 3 }),\n\t\t\tframeRate: 5,\n\t\t\trepeat: -1\n\t\t})\n\n\n\t\t// Camera setup\n\n\t\t// const camera = this.cameras.main;\n\t\t// camera.startFollow(player);\n\t\t// camera.setBounds(0, 0, map.widthInPixels, map.heightInPixels);\n\n\t\t// Controls\n\t\tcursors = this.input.keyboard.createCursorKeys();\n\n\t\t// this.add\n\t\t// \t.text(16, 16, 'Arrow keys to move\\nPress \"D\" to show hitboxes', {\n\t\t// \t\tfont: '18px monospace',\n\t\t// \t\tfill: '#ffffff',\n\t\t// \t\tpadding: { x: 20, y: 10 },\n\t\t// \t\tbackgroundColor: '#000000'\n\t\t// \t})\n\t\t// \t.setScrollFactor(0)\n\t\t// \t.setDepth(30)\n\t\t// ;\n\n\t\t// Debug graphics\n\n\t\t// this.input.keyboard.once('keydown_D', event => {\n\t\t// \tthis.physics.world.createDebugGraphic();\n\n\t\t// \tconst graphics = this.add.graphics().setAlpha(0.75);\n\t\t// \tworldLayer.renderDebug(graphics, {\n\t\t// \t\ttileColor: null,\n\t\t// \t\tcollidingTileColor: new Phaser.Display.Color(243, 134, 48, 255),\n\t\t// \t\tfaceColor: new Phaser.Display.Color(40, 39, 37, 255)\n\t\t// \t});\n\t\t// });\n\n\n\t}\n\n\tupdatePlayerMovement() {\n\t\tconst speed = 175;\n\t\tconst prevVelocity = player.body.velocity.clone();\n\n\t\t// Stop moving\n\t\tplayer.body.setVelocity(0);\n\n\t\t// Horizontal movement\n\t\tif (cursors.left.isDown) {\n\t\t\tplayer.body.setVelocityX(-100);\n\t\t} else if (cursors.right.isDown) {\n\t\t\tplayer.body.setVelocityX(100);\n\t\t}\n\n\t\t// Vertical movement\n\t\tif (cursors.up.isDown) {\n\t\t\tplayer.body.setVelocityY(-100);\n\t\t} else if (cursors.down.isDown) {\n\t\t\tplayer.body.setVelocityY(100);\n\t\t}\n\n\t\tplayer.body.velocity.normalize().scale(speed)\n\n\t\t// Update animation\n\t\tif (cursors.left.isDown) {\n\t\t\tplayer.anims.play('ninja_left_walk', true);\n\t\t} else if (cursors.right.isDown) {\n\t\t\tplayer.anims.play('ninja_right_walk', true);\n\t\t} else if (cursors.up.isDown) {\n\t\t\tplayer.anims.play('ninja_back_walk', true);\n\t\t} else if (cursors.down.isDown) {\n\t\t\tplayer.anims.play('ninja_front_walk', true);\n\t\t} else {\n\t\t\tplayer.anims.stop();\n\n\t\t\t// Pick idle frame to stop\n\t\t\tif (prevVelocity.x < 0) {\n\t\t\t\tplayer.setTexture('ninja', 'ninja_left');\n\t\t\t} else if (prevVelocity.x > 0) {\n\t\t\t\tplayer.setTexture('ninja', 'ninja_right');\n\t\t\t} else if (prevVelocity.y < 0) {\n\t\t\t\tplayer.setTexture('ninja', 'ninja_back');\n\t\t\t} else if (prevVelocity.y > 0) {\n\t\t\t\tplayer.setTexture('ninja', 'ninja_front');\n\t\t\t}\n\n\t\t}\n\t}\n\n\tupdateGuardMovement() {\n\t\tconst speed = 90;\n\t\tconst GUARD_TOP = 15;\n\t\tconst GUARD_BOTTOM = 140;\n\t\tconst VIEW_START = 100;\n\t\tconst VIEW_END = 145;\n\n\t\tguard.body.setVelocity(0);\n\n\t\t// Check if seen the player\n\t\tif (!guardMovingUp) {\n\t\t\tif (player.x > VIEW_START && player.x < VIEW_END) {\n\t\t\t\tseenPlayer = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\n\t\t// Change direction when reaching end of route\n\t\tif (guard.y <= GUARD_TOP || guard.y >= GUARD_BOTTOM) {\n\t\t\tguardMovingUp = !guardMovingUp;\n\t\t}\n\n\t\t// TODO: Add pause before changing direction\n\t\tif (guardMovingUp) {\n\t\t\tguard.body.setVelocityY(-speed);\n\t\t\tguard.anims.play('guard_back_walk', true);\n\t\t} else {\n\t\t\tguard.body.setVelocityY(speed);\n\t\t\tguard.anims.play('guard_front_walk', true);\n\t\t}\n\t}\n\n\tcalculateScore() {\n\t\t// Where the player needs to go\n\t\tconst TARGETS = [30, 210];\n\n\t\tif ((targetRight && player.x >= TARGETS[1])\n\t\t\t|| (!targetRight && player.x <= TARGETS[0])) {\n\t\t\ttargetRight = !targetRight;\n\t\t\tscore++;\n\t\t\tscoreText.setText(score);\n\t\t}\n\t}\n\n\tupdate(time, delta) {\n\t\tif (seenPlayer) {\n\t\t\tguard.anims.stop();\n\t\t\tplayer.anims.stop();\n\t\t\tplayer.body.setVelocity(0);\n\t\t\tgameOverText.setVisible(true);\n\t\t\treturn;\n\t\t}\n\t\tthis.updatePlayerMovement();\n\t\tthis.updateGuardMovement();\n\t\tthis.calculateScore();\n\t}\n}\n\nexport default GameLoop\n","import loadGame from '../load_game'\nimport GameLoop from '../scenes/simple_sneak'\n\nconst game = loadGame({\n\tscene: [GameLoop],\n\twidth: 240,\n\theight: 256,\n\tzoom: 2,\n})"],"sourceRoot":""}